<div class="d-flex flex-column" style="height:96vh; overflow-x:auto;">
    <MudStack>
        <MudExpansionPanels MultiExpansion="true">
            @if (!Sections.Any())
            {
                <MudText Align="Align.Center">No sections here yet... Click "Add Section" on the sidebar to make one!</MudText>
            }
            @foreach(var section in Sections)
            {
                <DiarySectionEdit Date="Date" DiarySection="section" />
            }
        </MudExpansionPanels>
    </MudStack>
</div>

@code {
    [Parameter]
    public DateOnly Date { get; set; }
    [Parameter]
    public List<DiarySection> Sections { get; set; }
    [Parameter]
    public List<DefaultSection> DefaultSections { get; set; }

    protected override void OnParametersSet()
    {
        if (!Sections.Any() && DefaultSections.Any())
        {
            SetSectionsFromDefault();
        }
    }

    private void SetSectionsFromDefault()
    {
        int index = 0;
        foreach (var section in DefaultSections)
        {
            index++;
            Sections.Add(new DiarySection() { SectionId = index, Title = section.DefaultTitle });
        }
    }
}

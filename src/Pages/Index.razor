@page "/"
@implements IDisposable
@inject StateContainer StateContainer
@inject IDiaryService DiaryService

@if (StateContainer.Diaries != null)
{
    <DiaryView Diaries="StateContainer.Diaries" />
}

@code {
    protected override async Task OnInitializedAsync()
    {
        StateContainer.OnChange += StateHasChanged;
        await DiaryService.GetDiariesAsync();
    }

    public void Dispose()
    {
        StateContainer.OnChange -= StateHasChanged;
    }
}